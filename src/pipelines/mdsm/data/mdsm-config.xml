<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pelican>

<configuration version="1.0">
    <pipeline>

        <buffers>
           <TimeStreamData>
               <buffer maxSize="100000000" maxChunkSize="100000000"/>
           </TimeStreamData>
        </buffers>

        <chunkers>
           <LofarChunker>
               <data type="TimeStreamData"/>
               <connection host="127.0.0.1" port="8090"/>
               <params samplesPerPacket="32"
                       nrPolarisation="2"
                       subbandsPerPacket="62"
                       packets="16"
                       clock="200"/>
               <samples type="8" />
           </LofarChunker>
        </chunkers>

        <clients>
            <LofarStreamDataClient>
                <data type="TimeStreamData" adapter="AdapterTimeStream" />
            </LofarStreamDataClient>
        </clients>

        <adapters>
            <AdapterTimeStream>
                <packetsPerChunk number="16"/>
                <subbands number="62" /> <!-- number of subbands -->
                <polarisations number="2" />
                <samplesPerPacket number="32" />
                <sampleSize bits="8" />
                <fixedSizePackets value="false" />
            </AdapterTimeStream>
        </adapters>

        <modules>
            <ChanneliserPolyphase>
                <channels number="512" />
                <processingThreads number="2" />
            </ChanneliserPolyphase>
        </modules>

        <output>
          <streamers>
             <PelicanTCPBlobServer active="true" >
                 <connection port="6969" />
             </PelicanTCPBlobServer>
          </streamers>
          <dataStreams>
             <stream name="ChannelisedStreamData" listeners="PelicanTCPBlobServer" />
          </dataStreams>
        </output>

    </pipeline>
</configuration>


